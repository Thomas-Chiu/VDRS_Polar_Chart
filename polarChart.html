<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>ECharts</title>
  <style>
    #main {
      width: 75vw;
      height: 75vh;
      margin: auto;
      }
  </style>
</head>

<body>
  <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
  <div id="main"></div>

  <!-- 引用 echarts.min.js -->
  <script src="./js/echarts.min.js"></script>
  <!-- 引用 moment.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>

<script>
let chartDom = document.getElementById('main');
let myChart = echarts.init(chartDom);
let option;
let data = [];
let busId = "ABC-1234"

// for (let i = 0; i <= 1000; i++) {
//     let r =Math.round(Math.random()*1617694239);
//     data.push([r, i]);
// }

data = [
    [
        0,
        1610640000000
    ],
    [
        0,
        1610640001000
    ],
    [
        0,
        1610640002000
    ],
    [
        0,
        1610640003000
    ],
    [
        0,
        1610640004000
    ],
    [
        0,
        1610640005000
    ],
    [
        0,
        1610640006000
    ],
    [
        0,
        1610640007000
    ],
    [
        0,
        1610640008000
    ],
    [
        0,
        1610640009000
    ],
    [
        0,
        1610640010000
    ],
    [
        0,
        1610640011000
    ],
    [
        0,
        1610640012000
    ],
    [
        0,
        1610640013000
    ],
    [
        0,
        1610640014000
    ],
    [
        0,
        1610640015000
    ],
    [
        0,
        1610640016000
    ],
    [
        0,
        1610640017000
    ],
    [
        0,
        1610640018000
    ],
    [
        0,
        1610640019000
    ],
    [
        0,
        1610640020000
    ],
    [
        0,
        1610640021000
    ],
    [
        0,
        1610640022000
    ],
    [
        0,
        1610640023000
    ],
    [
        0,
        1610640024000
    ],
    [
        0,
        1610640025000
    ],
    [
        0,
        1610640026000
    ],
    [
        0,
        1610640027000
    ],
    [
        0,
        1610640028000
    ],
    [
        73,
        1610640029000
    ],
    [
        73,
        1610640030000
    ],
    [
        73,
        1610640031000
    ],
    [
        73,
        1610640032000
    ],
    [
        73,
        1610640033000
    ],
    [
        73,
        1610640034000
    ],
    [
        73,
        1610640035000
    ],
    [
        73,
        1610640036000
    ],
    [
        73,
        1610640037000
    ],
    [
        74,
        1610640038000
    ],
    [
        73,
        1610640039000
    ],
    [
        73,
        1610640040000
    ],
    [
        74,
        1610640041000
    ],
    [
        73,
        1610640042000
    ],
    [
        73,
        1610640043000
    ],
    [
        74,
        1610640044000
    ],
    [
        73,
        1610640045000
    ],
    [
        73,
        1610640046000
    ],
    [
        74,
        1610640047000
    ],
    [
        73,
        1610640048000
    ],
    [
        74,
        1610640049000
    ],
    [
        73,
        1610640050000
    ],
    [
        73,
        1610640051000
    ],
    [
        74,
        1610640052000
    ],
    [
        73,
        1610640053000
    ],
    [
        73,
        1610640054000
    ],
    [
        74,
        1610640055000
    ],
    [
        73,
        1610640056000
    ],
    [
        74,
        1610640057000
    ],
    [
        73,
        1610640058000
    ],
    [
        73,
        1610640059000
    ],
    [
        73,
        1610640060000
    ],
    [
        73,
        1610640061000
    ],
    [
        74,
        1610640062000
    ],
    [
        73,
        1610640063000
    ],
    [
        73,
        1610640064000
    ],
    [
        73,
        1610640065000
    ],
    [
        73,
        1610640066000
    ],
    [
        74,
        1610640067000
    ],
    [
        73,
        1610640068000
    ],
    [
        73,
        1610640069000
    ],
    [
        73,
        1610640070000
    ],
    [
        74,
        1610640071000
    ],
    [
        73,
        1610640072000
    ],
    [
        73,
        1610640073000
    ],
    [
        74,
        1610640074000
    ],
    [
        73,
        1610640075000
    ],
    [
        73,
        1610640076000
    ],
    [
        74,
        1610640077000
    ],
    [
        73,
        1610640078000
    ],
    [
        73,
        1610640079000
    ],
    [
        74,
        1610640080000
    ],
    [
        73,
        1610640081000
    ],
    [
        73,
        1610640082000
    ],
    [
        74,
        1610640083000
    ],
    [
        73,
        1610640084000
    ],
    [
        73,
        1610640085000
    ],
    [
        74,
        1610640086000
    ],
    [
        73,
        1610640087000
    ],
    [
        73,
        1610640088000
    ],
    [
        74,
        1610640089000
    ],
    [
        73,
        1610640090000
    ],
    [
        73,
        1610640091000
    ],
    [
        73,
        1610640092000
    ],
    [
        73,
        1610640093000
    ],
    [
        73,
        1610640094000
    ],
    [
        73,
        1610640095000
    ],
    [
        74,
        1610640096000
    ],
    [
        73,
        1610640097000
    ],
    [
        73,
        1610640098000
    ],
    [
        73,
        1610640099000
    ],
    [
        74,
        1610640100000
    ],
    [
        73,
        1610640101000
    ],
    [
        74,
        1610640102000
    ],
    [
        73,
        1610640103000
    ],
    [
        73,
        1610640104000
    ],
    [
        74,
        1610640105000
    ],
    [
        73,
        1610640106000
    ],
    [
        73,
        1610640107000
    ],
    [
        74,
        1610640108000
    ],
    [
        73,
        1610640109000
    ],
    [
        73,
        1610640110000
    ],
    [
        73,
        1610640111000
    ],
    [
        74,
        1610640112000
    ],
    [
        73,
        1610640113000
    ],
    [
        73,
        1610640114000
    ],
    [
        74,
        1610640115000
    ]
    ]


console.log(data);

option = {
    title: {
        text: '數位大餅圖'
    },
    legend: {
        // legend.data 和 series[].data 名字要一樣
        data: ['車速', '里程數']
    },
    polar: {
        center: ['50%', '50%'],
        radius: ['45%', '75%'] // [內半徑, 外半徑]
    },    
    tooltip: { 
      trigger: 'axis', // axis 有提示框
      // axisPointer: { type: 'cross'} ,
      // formatter: function () {
      //   console.log("YAYA");
      //   return 'Loading';
      //   }
    },
    angleAxis: {
        type: 'time', // unix time 轉格式
        startAngle: -90,
        splitNumber: 0,
        axisLine: { show: false },
      },
    radiusAxis: {
        min: 0,
        max: function(value) {
          return value.max + 50
        }
    },
    dataZoom: [
        {
          type: "slider",
          start: 0,
          end: 50,
          moveHandleSize: 15,
        },
        {
          type: "inside",
          radiusAxisIndex: 3  
        }
      ],
    series: [
      {
        type: 'line',
        name: '車速',
        coordinateSystem: 'polar',
        showSymbol: false,
        data: data,
        lineStyle: { width: 1 }
      },
      // {
      //   type: 'line',
      //   name: '里程數',
      //   coordinateSystem: 'polar',
      //   showSymbol: false,
      //   data: data2,
      //   lineStyle: { width: 1 }
      // },
      { // 外圈儀表
        type: 'gauge',
        name: '儀錶板',
        title: { 
          show: true,
          fontWeight: 'bold',
          fontSize: 30,
          offsetCenter: [0, 0]
        },
        data: [
          { 
            value: null, 
            name: busId,
            detail: { show: false }
          }
        ],
        pointer: { show: false },
        splitNumber : 24,
        min: 0,
        max: 24,
        splitLine: { distance: -50, length: 0 },
        axisLine: { show: false },
        axisLabel: { 
          show: false,
          distance: 25, 
          fontWeight: 'bold',
          fontSize: 16
        },
        axisTick: { 
          splitNumber: 2, 
          length: 12.5, 
          distance: -10,
        },
      }
  ],
    animationDuration: 2000
};


option && myChart.setOption(option);



var time = moment(1610649542000).format("YYYY-MM-DD HH:mm:ss");
console.log(time);
let unix = moment().unix(); // 1318874398
console.log(unix);

</script>
</body>
</html>
